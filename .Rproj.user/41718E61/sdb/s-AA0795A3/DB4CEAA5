{
    "collab_server" : "",
    "contents" : "#context(databycountry)\n\ntest_that(\"Error messages are returned if API returns error\", {\n    expect_error(databycountry$new(api_key= \"a3\", country_code = c(\"us\",\"gb\",\"se\",\"lt\"), data = c(\"population\",\"birth_rate\",\"co2_emissions\",\"fifa\",\"hdi\"),years = 1990:2015))\n    expect_error(databycountry$new(api_key= \"97c1f72e01dd5ba3\", country_code = c(\"us\",\"uk\"), data = c(\"population\",\"birth_rate\",\"co2_emissions\",\"fifa\",\"hdi\"),years = 1990:2015))\n    })\n\ntest1 <- databycountry$new(api_key= \"97c1f72e01dd5ba3\", country_code = c(\"us\"), data = c(\"population\",\"birth_rate\"),years = 2010:2011)\n\n\ntest_that(\"class is correct\", {\n  #  test1 <- databycountry$new(api_key= \"97c1f72e01dd5ba3\", country_code = c(\"us\"), data = c(\"population\",\"birth_rate\"),years = 2010:2011)\n    \n    expect_true(class(test1)[1] == \"databycountry\")\n})\n\ntest_that(\"Correct output is returned 1\", {\n     result1 <- data.frame(country=rep.int(\"USA\",4),\n                          dataset=c(rep.int(\"population\",2),rep.int(\"birth_rate\",2)),\n                          years = c(\"2011\",\"2010\",\"2011\",\"2010\"),\n                          values = c(311721632,309347057,13.83,13.83))\n    \n    is_equivalent_to(test1$result[4], result1[4]) \n    is_equivalent_to(test1$result[3], result1[3])\n    is_equivalent_to(test1$result[2], result1[2])\n    is_equivalent_to(test1$result[1], result1[1])\n})\n\ntest_that(\"Field Years returns correct values\", {\n    expect_true(test1$years == \"2010,2011\") \n})\n\ntest_that(\"Field Country_code returns correct values\", {\n    expect_true(test1$country_code == \"us\") \n})\n\ntest_that(\"Field data returns correct values\", {\n    expect_true(test1$data == \"population,birth_rate\") \n})\n\ntest_that(\"Field data returns correct values\", {\n    expect_true(test1$api_key == \"97c1f72e01dd5ba3\") \n})\n\n\ntest_that(\"Correct output is returned 2\", {\n    test2 <- databycountry$new(api_key= \"97c1f72e01dd5ba3\", country_code = c(\"se\",\"lt\"), data = c(\"death_rate\"),years = c(2010,2015))\n    result2 <- data.frame(country=c(rep.int(\"Sweden\",2),rep.int(\"Lithuania\",2)),\n                          dataset=rep.int(\"death_rate\",4),\n                          years = c(\"2015\",\"2010\",\"2015\",\"2010\"),\n                          values = c(9.40,9.60,14.27,13.60))\n    \n    is_equivalent_to(test1$result[4], result1[4]) \n    is_equivalent_to(test1$result[3], result1[3])\n    is_equivalent_to(test1$result[2], result1[2])\n    is_equivalent_to(test1$result[1], result1[1])   \n})\n\n# Test if big data is downloaded\n\ntest3 <- databycountry$new(api_key = \"97c1f72e01dd5ba3\", \n                           country_code = c(\"se\",\"us\",\"lt\",\"gb\",\"no\",\"ru\",\"dk\",\"fi\"),\n                           data = c(\"population\", \n                                    \"bigmac_index\",\n                                    \"death_rate\",\n                                    \"debts_capita\",\n                                    \"debts_percent\",\n                                    \"fixed_telephone_subscriptions\",\n                                    \"jobless_rate\",\n                                    \"life_expectancy\",\n                                    \"olympicsummergames_goldmedals\",\n                                    \"gdp_capita\",\n                                    \"corruption_index\",\n                                    \"birth_rate\",\n                                    \"electric_energy_consumption\"), \n                           years = 1990:2017)\n\ntest_that(\"Check that big data is handled\", {\n    #no errors received and the data.frame with 4 columns is saved in $result\n    expect_true(length(test3$result) == 4) \n})\n\ntest_that(\"Check that incorrect arguments are not accepted\", {\n    expect_error(databycountry$new(api_key= \"97c1f72e01dd5ba3\", country_code = c(1,2,3,16), data = c(123,567),years = c(2017,2009)))\n    expect_error(databycountry$new(api_key= c(\"asd\",\"123\"), country_code = c(\"se\",\"lt\"), data = c(123,567),years = c(2017,2009)))\n    expect_error(databycountry$new(api_key= \"97c1f72e01dd5ba3\", country_code = c(\"se\",\"lt\"), data = c(123,567),years = c(2017,2009)))\n    expect_error(databycountry$new(api_key= \"97c1f72e01dd5ba3\", country_code = c(\"se\",\"lt\"), data = c(\"death_rate\"),years = c(\"y2018\",\"y2015\")))\n})\n",
    "created" : 1506687583752.000,
    "dirty" : true,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "4262726241",
    "id" : "DB4CEAA5",
    "lastKnownWriteTime" : 1506693328,
    "last_content_update" : 1506693328756,
    "path" : "~/R/Advanced R course/AdvRprogr_lab5/INQStatsR/tests/testthat/test_databycountry.R",
    "project_path" : "INQStatsR/tests/testthat/test_databycountry.R",
    "properties" : {
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}